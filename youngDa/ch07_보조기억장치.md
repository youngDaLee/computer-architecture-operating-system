# ch07. 보조기억장치
## 7-1. 다양한 보조기억장치
### 하드디스크(HDD)
- 자기적인 방식으로 데이터를 저징하는 보조기억장치
- 플래터 : 실질적으로 데이터가 저장되는 원판
    - 트랙/섹터 단위로 데이터를 저장.
    - 트랙 : 플래터를 중심으로 그린 동심원 중 하나의 원
    - 섹터 : 트랙을 나눈 한 조각의 단위
    - 실린더 : 트랙이 위치한 곳을모아 연결한논리적 단위. 연속된 정보는 보통 한 실린더에 기록됨
- 스핀들 : 플래터를 회전시키는 구성요소
- RPM : 스핀들이 플래터를 돌리는 속도(분당 회전수)
- 헤드 : 플래터를 대상으로 데이터를 읽고쓰는 구성요소
- 디스크암 : 헤드를 원하는 위치로 이동시키는 바늘

HDD가 저장도니 데이터에 접근하는 시간
- 탐색시간 : 접근하려는 데이터가 트랙까지 헤드를 이동시키는 시간
- 회전지연 : 헤드가 있는 곳으로 플래터를 회전시키는 시간
- 전송시간 : HDD와 컴퓨터 간 데이터를 전송하는 시간

탐색시간과 회전지연을 단축하기 위해서는 플래터를 빨리 돌리는 것도 중요하지만, 접근하려는 데이터가 플래터/헤더를 조금 옮겨도 접근할 수 있는 곳에 위치하는것도 중요(참조지역성)
- +) 참조지역성이 떨어지는 경우 : 디스크 파편화

### 플래시 메모리
USB, SD카드, SSD
- 전기적으로 데이터를 읽고쓰는 반도체 기반 저장장치
- 셀 : 플래시 메모리에서 데이터를 저장하는 가장 작은 단위
    - SLC : 한 셀에 1비트 저장.  한 셀로 두 개 정보 표현(0/1) => 빠른 입출력 가능. 수명도 길다. 다만 용량대비 가격이 높다.
    - MLC : 한 셀에 2비트 저장.  한 셀로 네 개 정보 표현. SLC보다 대용화에 유리함. SLC보다 저렴
    - TLC : 한 셀에 3비트 저장.  한 셀로 8개 정보 표현. 대용화에 유리. 수명과 속도는 떨어지지만 용량대비 가격도 저렴함
    - QLT : 한 셀에 4비트 저장
- 페이지 : 셀들이 모여 만들어진 단위
    - 플래시메모리에서 읽기 쓰기는 페이지 단위로 이루어짐
    - 페이지 상태값 : Free(데이터 없어 저장 가능) / Valid(유효 데이터 저장하고 있는 상태) / Invalid(쓰레기값 보유하고 있는 상태)
    - 플래시메모리는 Invalid 정리하기 위해 가비지 컬렉션 기능을 제공함
- 블록 : 페이지가 모여 만들어진 단위
- 플레인 : 블록이 모인 단위
- 다이 : 플레인이 모인 단위

## 7-2 RAID의 정의와 종류
### RAID의 정의
- 데이터 안정성과 높은 성능을 위해 여러 개의 물리보조기억장치를 하나의 논리보조기억장치처럼 사용하는 기술

RAID 0 
- 여러 보조기억장치에 데이터를 단순히 나눠 구성하는 방식
- 스트라이핑(striping) : 분산하여 저장하는 것
- 스트라입(stripe) : 분산하여 저장도니 데이터
- 데이터 읽고쓰는 속도가 빨라짐
- 저장된 정보가 안전하지 않음. 하나의 HDD에 문제가 생기면 다른 모든 HDD 읽는데 문제가 생김
- MongoDB에 비유 : only Sharding(Primary만 존재)

RAID 1
- 복사본을 만드는 방식
    - 미러링
- 스프라이핑이 되었지만, 미러링된 디스크가 있음
- 쓰기 속도는 RAID 0 보다 느림
- 복구가 매우 간단함(하나의 디스크에 문제가 생겨도 잃어버린 데이터 정보를 금방 찾을 수 있음)
- 대신 하드디스크 개수 한정되었을 때 사용가능한 용량이 적어짐
- 많은 양의 HDD가 필요해지고, 비용이 증가함
- MongoDB에 비유 : Sharding Cluster

RAID 4
- RAID 1 처럼 완전한 복사본 만드는 대신에 오류 검출하고 복구를 위한 정보를 저장하는 장치를 두는 방식
    - 패리티 비트(parity bit) : 오류를 검출하고 복구하는 정보
- RAID 1보다 적은 하드디스크로 데이터를 안전하게 보관함.


RAID 5
- RAID 4는 새로운 데이터 저장될 때 마다 패리티 저장하는 디스크에도 데이트를 씀 -> 패리티 저장 장치에 병목 발생
- RAID 5 : 패리티 정보를 분산하여 병목 현상 해소

RAID 6
- 기본적으로 RAID 5와 같으나, 두 개의 패리티를 구성
- 패리티의 HA 확보

# 내 생각
보조기억장치는 고등학교 물리 시간이 생각나서 새록새록 했습니다. 탐색시간과 회전지연시간을 줄이는 것이 성능 개선의 키포인트인 것 같은데, 이를 줄일 수 있는 방법이 무엇이 있을지 고민이 되었습니다.

# 논의할 내용
- 탐색시간과 회전지연 시간을 줄이는 방법
- 어떤 서비스에 어떤 RAID를 도입해야 하는지 고민